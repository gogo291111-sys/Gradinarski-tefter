<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå± –ì—Ä–∞–¥–∏–Ω–∞—Ä—Å–∫–∏ –¢–µ—Ñ—Ç–µ—Ä</title>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Merriweather:wght@300;400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --soil-brown: #3d2817;
            --leaf-green: #4a7c59;
            --dark-green: #2d5016;
            --light-green: #9cb896;
            --earth: #8b6f47;
            --cream: #f5f1e8;
            --wood: #6b4423;
            --flower: #d4a574;
        }

        body {
            font-family: 'Merriweather', serif;
            background: linear-gradient(135deg, #e8dcc4 0%, #c9b896 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∏ –ª–∏—Å—Ç–∞ –≤—ä–≤ —Ñ–æ–Ω–∞ */
        body::before {
            content: 'üåø';
            position: fixed;
            font-size: 120px;
            opacity: 0.1;
            top: -20px;
            left: -30px;
            transform: rotate(-25deg);
            z-index: 0;
            animation: sway 6s ease-in-out infinite;
        }

        body::after {
            content: 'üçÉ';
            position: fixed;
            font-size: 90px;
            opacity: 0.1;
            bottom: -10px;
            right: -20px;
            transform: rotate(45deg);
            z-index: 0;
            animation: sway 8s ease-in-out infinite reverse;
        }

        @keyframes sway {
            0%, 100% { transform: rotate(-25deg) translateY(0); }
            50% { transform: rotate(-30deg) translateY(-10px); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-family: 'Caveat', cursive;
            font-size: 4rem;
            color: var(--dark-green);
            text-shadow: 3px 3px 0px rgba(139, 111, 71, 0.3);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--soil-brown);
            font-style: italic;
        }

        .notebook {
            background: linear-gradient(to bottom, #f9f6f0 0%, #f5f1e8 100%);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 
                0 10px 40px rgba(61, 40, 23, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            position: relative;
            border: 3px solid var(--earth);
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        .month-image {
            width: 100%;
            height: 250px;
            border-radius: 12px;
            margin-bottom: 25px;
            object-fit: cover;
            border: 4px solid var(--earth);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞ —Å–ø–∏—Ä–∞–ª–∞ –Ω–∞ —Ç–µ—Ñ—Ç–µ—Ä–∞ */
        .notebook::before {
            content: '';
            position: absolute;
            left: 0;
            top: 30px;
            bottom: 30px;
            width: 30px;
            background: 
                repeating-linear-gradient(
                    to bottom,
                    transparent,
                    transparent 15px,
                    var(--wood) 15px,
                    var(--wood) 25px
                );
            border-radius: 15px 0 0 15px;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            animation: fadeIn 1s ease-out 0.4s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .month-select {
            flex: 1;
            min-width: 200px;
        }

        .month-select select {
            width: 100%;
            padding: 12px 20px;
            font-family: 'Caveat', cursive;
            font-size: 1.3rem;
            background: white;
            border: 3px solid var(--leaf-green);
            border-radius: 10px;
            color: var(--dark-green);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .month-select select:hover {
            border-color: var(--dark-green);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transform: translateY(-2px);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 30px;
        }

        .calendar-header {
            font-family: 'Caveat', cursive;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark-green);
            text-align: center;
            padding: 10px;
            background: linear-gradient(135deg, var(--light-green), var(--leaf-green));
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .calendar-day {
            aspect-ratio: 1;
            border: 2px solid var(--earth);
            border-radius: 10px;
            padding: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .calendar-day:hover {
            transform: scale(1.05) rotate(1deg);
            border-color: var(--leaf-green);
            box-shadow: 0 5px 15px rgba(74, 124, 89, 0.3);
            z-index: 10;
        }

        .calendar-day.empty {
            background: transparent;
            border: none;
            cursor: default;
        }

        .calendar-day.empty:hover {
            transform: none;
        }

        .calendar-day.selected {
            background: linear-gradient(135deg, var(--light-green), var(--leaf-green));
            border-color: var(--dark-green);
            box-shadow: 0 5px 15px rgba(45, 80, 22, 0.4);
        }

        .calendar-day.has-note::after {
            content: 'üå±';
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.8rem;
        }

        .day-number {
            font-family: 'Caveat', cursive;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark-green);
            margin-bottom: 5px;
        }

        .day-preview {
            font-size: 0.7rem;
            color: var(--soil-brown);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .note-section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 3px solid var(--leaf-green);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .note-section h2 {
            font-family: 'Caveat', cursive;
            font-size: 2rem;
            color: var(--dark-green);
            margin-bottom: 15px;
            border-bottom: 2px dashed var(--light-green);
            padding-bottom: 10px;
        }

        .note-section textarea {
            width: 100%;
            min-height: 250px;
            padding: 15px;
            font-family: 'Caveat', cursive;
            font-size: 1.3rem;
            border: 2px solid var(--light-green);
            border-radius: 8px;
            resize: vertical;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                transparent calc(100% - 1px), 
                var(--light-green) calc(100% - 1px));
            background-size: 100% 2rem;
            line-height: 2rem;
            color: var(--soil-brown);
            transition: all 0.3s ease;
        }

        .note-section textarea:focus {
            outline: none;
            border-color: var(--leaf-green);
            box-shadow: 0 0 15px rgba(74, 124, 89, 0.3);
        }

        .note-section textarea::placeholder {
            color: #a0a0a0;
            font-style: italic;
        }

        .save-btn {
            margin-top: 15px;
            padding: 12px 30px;
            font-family: 'Caveat', cursive;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--leaf-green), var(--dark-green));
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .save-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 20px rgba(45, 80, 22, 0.4);
        }

        .save-btn:active {
            transform: translateY(0);
        }

        .moon-panel {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 25px;
            border-radius: 12px;
            border: 3px solid var(--flower);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            animation: fadeIn 1s ease-out 0.6s both;
            position: relative;
            overflow: hidden;
        }

        .moon-panel::before {
            content: '‚ú®';
            position: absolute;
            font-size: 60px;
            opacity: 0.1;
            top: -10px;
            right: -10px;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.2); }
        }

        .moon-panel h2 {
            font-family: 'Caveat', cursive;
            font-size: 2rem;
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .moon-display {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .moon-icon {
            font-size: 5rem;
            text-align: center;
            animation: moonGlow 2s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.5));
        }

        @keyframes moonGlow {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.5)); }
            50% { filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.8)); }
        }

        .moon-info {
            flex: 1;
            min-width: 250px;
            color: white;
        }

        .moon-phase-name {
            font-family: 'Caveat', cursive;
            font-size: 2rem;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .moon-illumination {
            font-size: 1.1rem;
            color: #d4a574;
            margin-bottom: 15px;
        }

        .moon-advice {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--flower);
            margin-top: 20px;
        }

        .moon-advice h3 {
            font-family: 'Caveat', cursive;
            font-size: 1.5rem;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .moon-advice ul {
            list-style: none;
            padding: 0;
        }

        .moon-advice li {
            color: #e0e0e0;
            margin-bottom: 8px;
            padding-left: 25px;
            position: relative;
            line-height: 1.6;
        }

        .moon-advice li::before {
            content: 'üåô';
            position: absolute;
            left: 0;
        }

        .moon-advice .warning {
            color: #ff6b6b;
            font-weight: bold;
        }

        .moon-advice .warning::before {
            content: '‚ö†Ô∏è';
        }

        .moon-advice .good {
            color: #51cf66;
        }

        .moon-advice .good::before {
            content: '‚úÖ';
        }

        .calendar-day .moon-mini {
            position: absolute;
            bottom: 2px;
            left: 2px;
            font-size: 0.9rem;
            opacity: 0.6;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            font-family: 'Caveat', cursive;
            font-size: 1.2rem;
            color: var(--soil-brown);
            opacity: 0.8;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .notebook {
                padding: 20px;
            }

            .calendar-grid {
                gap: 5px;
            }

            .calendar-day {
                padding: 5px;
            }

            .day-number {
                font-size: 1rem;
            }

            .day-preview {
                font-size: 0.6rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå± –ì—Ä–∞–¥–∏–Ω–∞—Ä—Å–∫–∏ –¢–µ—Ñ—Ç–µ—Ä üåø</h1>
            <p>–ó–∞–ø–∏—Å–≤–∞–π –∫–∞–∫–≤–æ —Å–∏ –∑–∞—Å—è–ª, –ø–æ–ª–∏–≤–∞–ª –∏ –ø—Ä–∏–±—Ä–∞–ª –æ—Ç –≥—Ä–∞–¥–∏–Ω–∞—Ç–∞</p>
        </div>

        <div class="notebook">
            <img id="monthImage" class="month-image" src="" alt="–ú–µ—Å–µ—á–Ω–∞ —Å–Ω–∏–º–∫–∞">
            
            <div class="moon-panel" id="moonPanel">
                <h2>üåô –õ—É–Ω–µ–Ω –ö–∞–ª–µ–Ω–¥–∞—Ä</h2>
                <div class="moon-display">
                    <div class="moon-icon" id="moonIcon">üåï</div>
                    <div class="moon-info">
                        <div class="moon-phase-name" id="moonPhaseName">–ü—ä–ª–Ω–æ–ª—É–Ω–∏–µ</div>
                        <div class="moon-illumination" id="moonIllumination">–û—Å–≤–µ—Ç–µ–Ω–æ—Å—Ç: 100%</div>
                    </div>
                </div>
                <div class="moon-advice" id="moonAdvice">
                    <h3>–ì—Ä–∞–¥–∏–Ω–∞—Ä—Å–∫–∏ —Å—ä–≤–µ—Ç–∏ –∑–∞ —Ç–∞–∑–∏ —Ñ–∞–∑–∞:</h3>
                    <ul id="moonAdviceList">
                        <li>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—ä–≤–µ—Ç–∏...</li>
                    </ul>
                </div>
            </div>

            <div class="controls">
                <div class="month-select">
                    <select id="monthSelect">
                        <option value="0">–Ø–Ω—É–∞—Ä–∏</option>
                        <option value="1">–§–µ–≤—Ä—É–∞—Ä–∏</option>
                        <option value="2">–ú–∞—Ä—Ç</option>
                        <option value="3">–ê–ø—Ä–∏–ª</option>
                        <option value="4">–ú–∞–π</option>
                        <option value="5">–Æ–Ω–∏</option>
                        <option value="6">–Æ–ª–∏</option>
                        <option value="7">–ê–≤–≥—É—Å—Ç</option>
                        <option value="8">–°–µ–ø—Ç–µ–º–≤—Ä–∏</option>
                        <option value="9">–û–∫—Ç–æ–º–≤—Ä–∏</option>
                        <option value="10">–ù–æ–µ–º–≤—Ä–∏</option>
                        <option value="11">–î–µ–∫–µ–º–≤—Ä–∏</option>
                    </select>
                </div>
            </div>

            <div class="calendar-grid" id="calendar">
                <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—ä—Ç —â–µ —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞ —Å JavaScript -->
            </div>

            <div class="note-section">
                <h2 id="noteTitle">–ò–∑–±–µ—Ä–∏ –¥–µ–Ω –æ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–∞</h2>
                <textarea 
                    id="noteText" 
                    placeholder="–ù–∞–ø–∏—à–∏ –∫–∞–∫–≤–æ —Å–∏ –Ω–∞–ø—Ä–∞–≤–∏–ª –≤ –≥—Ä–∞–¥–∏–Ω–∞—Ç–∞...
üå± –ó–∞—Å—è–ª —Å—ä–º...
üíß –ü–æ–ª—è–ª —Å—ä–º...
üåæ –ü—Ä–∏–±—Ä–∞–ª —Å—ä–º..."></textarea>
                <button class="save-btn" id="saveBtn" onclick="saveNote()">üíæ –ó–∞–ø–∞–∑–∏</button>
            </div>
        </div>

        <div class="footer">
            –ù–∞–ø—Ä–∞–≤–µ–Ω–æ —Å ‚ù§Ô∏è –∑–∞ –≥—Ä–∞–¥–∏–Ω–∞—Ä–∏—Ç–µ | –ì—Ä–∞–¥–∏–Ω–∞—Ç–∞ –µ —Å–≤—ä—Ä–∑–∞–Ω–∞ —Å –ª—É–Ω–∞—Ç–∞ üåô | –í—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –≤ —Ç–≤–æ—è –±—Ä–∞—É–∑—ä—Ä üåª
        </div>
    </div>

    <script>
        let currentDate = new Date();
        let selectedDate = null;
        let notes = {};

        // –°–Ω–∏–º–∫–∏ –∑–∞ –≤—Å–µ–∫–∏ –º–µ—Å–µ—Ü (–∏–∑–ø–æ–ª–∑–≤–∞–º–µ Unsplash —Å –≥—Ä–∞–¥–∏–Ω–∞—Ä—Å–∫–∞ —Ç–µ–º–∞—Ç–∏–∫–∞)
        const monthImages = {
            0: 'https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?w=800&h=250&fit=crop', // –Ø–Ω—É–∞—Ä–∏ - –∑–∏–º–Ω–∞ –≥—Ä–∞–¥–∏–Ω–∞
            1: 'https://images.unsplash.com/photo-1612538498456-e861df91d4d0?w=800&h=250&fit=crop', // –§–µ–≤—Ä—É–∞—Ä–∏ - —Ä–∞–Ω–Ω–∞ –ø—Ä–æ–ª–µ—Ç
            2: 'https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=800&h=250&fit=crop', // –ú–∞—Ä—Ç - —Ü—ä—Ñ—Ç—è—â–∏ —Ü–≤–µ—Ç—è
            3: 'https://images.unsplash.com/photo-1464226184884-fa280b87c399?w=800&h=250&fit=crop', // –ê–ø—Ä–∏–ª - –ø—Ä–æ–ª–µ—Ç–Ω–∞ –≥—Ä–∞–¥–∏–Ω–∞
            4: 'https://images.unsplash.com/photo-1495344517868-8ebaf0a2044a?w=800&h=250&fit=crop', // –ú–∞–π - –∑–µ–ª–µ–Ω–∞ –≥—Ä–∞–¥–∏–Ω–∞
            5: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=250&fit=crop', // –Æ–Ω–∏ - –ª—è—Ç–Ω–∞ –≥—Ä–∞–¥–∏–Ω–∞
            6: 'https://images.unsplash.com/photo-1592419044706-39796d40f98c?w=800&h=250&fit=crop', // –Æ–ª–∏ - –¥–æ–º–∞—Ç–∏
            7: 'https://images.unsplash.com/photo-1563514227147-6d2ff665a6a0?w=800&h=250&fit=crop', // –ê–≤–≥—É—Å—Ç - –∑–µ–ª–µ–Ω—á—É—Ü–∏
            8: 'https://images.unsplash.com/photo-1535083783855-76ae62b2914e?w=800&h=250&fit=crop', // –°–µ–ø—Ç–µ–º–≤—Ä–∏ - –µ—Å–µ–Ω–Ω–∞ —Ä–µ–∫–æ–ª—Ç–∞
            9: 'https://images.unsplash.com/photo-1509348083804-–¥–µ47bb4c0e97?w=800&h=250&fit=crop', // –û–∫—Ç–æ–º–≤—Ä–∏ - –µ—Å–µ–Ω–Ω–∏ –ª–∏—Å—Ç–∞
            10: 'https://images.unsplash.com/photo-1511497584788-876760111969?w=800&h=250&fit=crop', // –ù–æ–µ–º–≤—Ä–∏ - –µ—Å–µ–Ω–Ω–∞ –≥—Ä–∞–¥–∏–Ω–∞
            11: 'https://images.unsplash.com/photo-1482786555658-2e4c6b8e74bb?w=800&h=250&fit=crop'  // –î–µ–∫–µ–º–≤—Ä–∏ - –∑–∏–º–Ω–∞ –≥—Ä–∞–¥–∏–Ω–∞
        };

        // –û–±–Ω–æ–≤—è–≤–∞ –º–µ—Å–µ—á–Ω–∞—Ç–∞ —Å–Ω–∏–º–∫–∞
        function updateMonthImage(month) {
            const img = document.getElementById('monthImage');
            img.src = monthImages[month];
            img.style.animation = 'none';
            setTimeout(() => {
                img.style.animation = 'fadeIn 0.8s ease-out';
            }, 10);
        }

        // –õ—É–Ω–Ω–∏ —Ñ–∞–∑–∏ –∏ —Å—ä–≤–µ—Ç–∏
        const moonPhases = {
            newMoon: {
                name: '–ù–æ–≤–æ–ª—É–Ω–∏–µ',
                icon: 'üåë',
                advice: [
                    { type: 'warning', text: '–ù–ï —Å–µ–π—Ç–µ –∏ –ù–ï —Å–∞–¥–µ—Ç–µ –Ω–∏—â–æ - —Ä–∞—Å—Ç–µ–Ω–∏—è—Ç–∞ —Ä–∞—Å—Ç–∞—Ç —Å–ª–∞–±–æ' },
                    { type: 'good', text: '–î–æ–±—ä—Ä –º–æ–º–µ–Ω—Ç –∑–∞ –ø–æ—á–∏–≤–∫–∞ –Ω–∞ –≥—Ä–∞–¥–∏–Ω–∞—Ç–∞' },
                    { type: 'good', text: '–ü–æ–¥—Ö–æ–¥—è—â–æ –∑–∞ –ø–ª–∞–Ω–∏—Ä–∞–Ω–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞' },
                    { type: 'normal', text: '–ú–æ–∂–µ –¥–∞ —Å–µ –æ—Ñ–æ—Ä–º—è—Ç —Ö—Ä–∞—Å—Ç–∏ –∏ –¥—ä—Ä–≤–µ—Ç–∞' }
                ]
            },
            waxingCrescent: {
                name: '–ú–ª–∞–¥a —Ä–∞—Å—Ç—è—â–∞ –ª—É–Ω–∞',
                icon: 'üåí',
                advice: [
                    { type: 'good', text: '–û—Ç–ª–∏—á–Ω–æ –≤—Ä–µ–º–µ –∑–∞ —Å–µ–∏—Ç–±–∞ –Ω–∞ –ª–∏—Å—Ç–Ω–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏' },
                    { type: 'good', text: '–ó–∞—Å–µ–π—Ç–µ —Å–∞–ª–∞—Ç–∞, —Å–ø–∞–Ω–∞–∫, –∑–µ–ª–µ, –º–∞–≥–¥–∞–Ω–æ–∑' },
                    { type: 'good', text: '–†–∞—Å—Ç–µ–Ω–∏—è—Ç–∞ –∏–º–∞—Ç –¥–æ–±—ä—Ä —Ä—ä—Å—Ç –Ω–∞–≥–æ—Ä–µ' },
                    { type: 'normal', text: '–ü–æ–ª–∏–≤–∞–π—Ç–µ —É–º–µ—Ä–µ–Ω–æ' }
                ]
            },
            firstQuarter: {
                name: '–ü—ä—Ä–≤–∞ —á–µ—Ç–≤—ä—Ä—Ç',
                icon: 'üåì',
                advice: [
                    { type: 'good', text: '–ù–∞–π-–¥–æ–±—Ä–æ –≤—Ä–µ–º–µ –∑–∞ —Å–µ–∏—Ç–±–∞ –Ω–∞ –ø–ª–æ–¥–Ω–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è' },
                    { type: 'good', text: '–ó–∞—Å–µ–π—Ç–µ –¥–æ–º–∞—Ç–∏, –∫—Ä–∞—Å—Ç–∞–≤–∏—Ü–∏, —Ç–∏–∫–≤–∏—á–∫–∏, –ø–∏–ø–µ—Ä' },
                    { type: 'good', text: '–ü—Ä–∏—Å–∞–¥–µ—Ç–µ –æ–≤–æ—â–Ω–∏ –¥—ä—Ä–≤–µ—Ç–∞' },
                    { type: 'normal', text: '–¢–æ—Ä–µ—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è—Ç–∞ –∑–∞ –ø–æ-–¥–æ–±—ä—Ä –¥–æ–±–∏–≤' }
                ]
            },
            waxingGibbous: {
                name: '–ù–∞—Ä–∞—Å—Ç–≤–∞—â–∞ –ª—É–Ω–∞',
                icon: 'üåî',
                advice: [
                    { type: 'good', text: '–î–æ–±—ä—Ä –ø–µ—Ä–∏–æ–¥ –∑–∞ –∑–∞—Å–∞–∂–¥–∞–Ω–µ –Ω–∞ —Ä–∞–∑—Å–∞–¥' },
                    { type: 'good', text: '–†–∞—Å—Ç–µ–Ω–∏—è—Ç–∞ —Å–µ —É–∫—Ä–µ–ø–≤–∞—Ç' },
                    { type: 'normal', text: '–ü—Ä–æ–¥—ä–ª–∂–µ—Ç–µ —Å –∞–∫—Ç–∏–≤–Ω–∞ –≥—Ä–∏–∂–∞' },
                    { type: 'normal', text: '–í—Ä–µ–º–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏ –ø—Ä–æ–ª–µ—Ç–Ω–∏ –∑–∞—Å–∞–∂–¥–∞–Ω–∏—è' }
                ]
            },
            fullMoon: {
                name: '–ü—ä–ª–Ω–æ–ª—É–Ω–∏–µ',
                icon: 'üåï',
                advice: [
                    { type: 'warning', text: '–ù–ï —Å–µ–π—Ç–µ - —Ä–∞—Å—Ç–µ–Ω–∏—è—Ç–∞ —Ä–∞—Å—Ç–∞—Ç —Å–ª–∞–±–æ' },
                    { type: 'good', text: '–û—Ç–ª–∏—á–Ω–æ –≤—Ä–µ–º–µ –∑–∞ –±–µ—Ä–µ–Ω–µ –Ω–∞ –ø–ª–æ–¥–æ–≤–µ –∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏' },
                    { type: 'good', text: '–ü—Ä–∏–±—Ä–∞–Ω–∏—Ç–µ –ø–ª–æ–¥–æ–≤–µ —Å–∞ –Ω–∞–π-—Å–æ—á–Ω–∏ –∏ –≤–∫—É—Å–Ω–∏' },
                    { type: 'good', text: '–ë–µ—Ä–µ—Ç–µ –±–∏–ª–∫–∏ - —Å–∞ –Ω–∞–π-—Å–∏–ª–Ω–∏' },
                    { type: 'normal', text: '–ü–æ–ª–∏–≤–∞–π—Ç–µ –ø–æ-–æ–±–∏–ª–Ω–æ' }
                ]
            },
            waningGibbous: {
                name: '–ù–∞–º–∞–ª—è–≤–∞—â–∞ –ª—É–Ω–∞',
                icon: 'üåñ',
                advice: [
                    { type: 'good', text: '–í—Ä–µ–º–µ –∑–∞ —Å–µ–∏—Ç–±–∞ –Ω–∞ –∫–æ—Ä–µ–Ω–æ–≤–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è' },
                    { type: 'good', text: '–ó–∞—Å–µ–π—Ç–µ –º–æ—Ä–∫–æ–≤–∏, —Ü–≤–µ–∫–ª–æ, –∫–∞—Ä—Ç–æ—Ñ–∏, –ª—É–∫' },
                    { type: 'good', text: '–†–∞—Å—Ç–µ–Ω–∏—è—Ç–∞ —Ä–∞–∑–≤–∏–≤–∞—Ç —Å–∏–ª–Ω–∞ –∫–æ—Ä–µ–Ω–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞' },
                    { type: 'normal', text: '–ü–æ–¥—Ö–æ–¥—è—â–æ –∑–∞ —Ä—è–∑–∞–Ω–µ –Ω–∞ —Ç—Ä–µ–≤–∞' }
                ]
            },
            lastQuarter: {
                name: '–ü–æ—Å–ª–µ–¥–Ω–∞ —á–µ—Ç–≤—ä—Ä—Ç',
                icon: 'üåó',
                advice: [
                    { type: 'good', text: '–ü—Ä–æ–¥—ä–ª–∂–µ—Ç–µ —Å –∫–æ—Ä–µ–Ω–æ–≤–∏ –∫—É–ª—Ç—É—Ä–∏' },
                    { type: 'good', text: '–û–∫–æ–ø–∞–≤–∞–π—Ç–µ –∏ —Ä–∞–∑—Ä–æ—Ö–∫–≤–∞–π—Ç–µ –ø–æ—á–≤–∞—Ç–∞' },
                    { type: 'normal', text: '–ë–æ—Ä–µ—Ç–µ —Å–µ —Å –ø–ª–µ–≤–µ–ª–∏—Ç–µ' },
                    { type: 'warning', text: '–ò–∑–±—è–≥–≤–∞–π—Ç–µ –∑–∞—Å–∞–∂–¥–∞–Ω–µ –Ω–∞ –Ω–∞–¥–∑–µ–º–Ω–∏ –∫—É–ª—Ç—É—Ä–∏' }
                ]
            },
            waningCrescent: {
                name: '–°—Ç–∞—Äa –Ω–∞–º–∞–ª—è–≤–∞—â–∞ –ª—É–Ω–∞',
                icon: 'üåò',
                advice: [
                    { type: 'warning', text: '–ù–µ –µ –ø–æ–¥—Ö–æ–¥—è—â–æ –∑–∞ —Å–µ–∏—Ç–±–∞' },
                    { type: 'good', text: '–ü–æ—á–∏—Å—Ç–µ—Ç–µ –≥—Ä–∞–¥–∏–Ω–∞—Ç–∞ –æ—Ç –ø–ª–µ–≤–µ–ª–∏' },
                    { type: 'good', text: '–û–±—Ä–µ–∂–µ—Ç–µ –±–æ–ª–Ω–∏ –∏ —Å—Ç–∞—Ä–∏ –∫–ª–æ–Ω–∏' },
                    { type: 'normal', text: '–ü–æ–¥–≥–æ—Ç–≤–µ—Ç–µ —Å–µ –∑–∞ –Ω–æ–≤–æ–ª—É–Ω–∏–µ' }
                ]
            }
        };

        // –ü–æ–¥–æ–±—Ä–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç—ä–º –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Ñ–∞–∑–∞—Ç–∞ –Ω–∞ –ª—É–Ω–∞—Ç–∞
        function getMoonPhase(date) {
            const year = date.getFullYear();
            const month = date.getMonth();
            const day = date.getDate();

            // –ù–æ–≤ –ø–æ-—Ç–æ—á–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç—ä–º
            const totalDays = Math.floor((Date.UTC(year, month, day) - Date.UTC(2000, 0, 6)) / (1000 * 60 * 60 * 24));
            const moonCycle = 29.53058867; // –°—Ä–µ–¥–Ω–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç –Ω–∞ –ª—É–Ω–Ω–∏—è —Ü–∏–∫—ä–ª
            const phase = (totalDays % moonCycle) / moonCycle;
            
            let phaseName, icon, illumination;
            
            // –ü–æ-—Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ —Ñ–∞–∑–∞—Ç–∞
            if (phase < 0.0625 || phase >= 0.9375) {
                phaseName = 'newMoon';
                illumination = Math.round(phase < 0.0625 ? phase * 800 : (1 - phase) * 800);
            } else if (phase < 0.1875) {
                phaseName = 'waxingCrescent';
                illumination = Math.round(phase * 400);
            } else if (phase < 0.3125) {
                phaseName = 'firstQuarter';
                illumination = Math.round(30 + phase * 100);
            } else if (phase < 0.4375) {
                phaseName = 'waxingGibbous';
                illumination = Math.round(60 + phase * 100);
            } else if (phase < 0.5625) {
                phaseName = 'fullMoon';
                illumination = Math.round(95 + (0.5 - Math.abs(phase - 0.5)) * 40);
            } else if (phase < 0.6875) {
                phaseName = 'waningGibbous';
                illumination = Math.round(100 - (phase - 0.5) * 100);
            } else if (phase < 0.8125) {
                phaseName = 'lastQuarter';
                illumination = Math.round(70 - phase * 100);
            } else {
                phaseName = 'waningCrescent';
                illumination = Math.round(40 - phase * 100);
            }

            // –û–≥—Ä–∞–Ω–∏—á–∞–≤–∞–º–µ –æ—Å–≤–µ—Ç–µ–Ω–æ—Å—Ç—Ç–∞ –º–µ–∂–¥—É 0 –∏ 100
            illumination = Math.max(0, Math.min(100, illumination));

            const phaseData = moonPhases[phaseName];
            return { phase: phaseName, illumination, ...phaseData };
        }

        // –û–±–Ω–æ–≤—è–≤–∞ –ª—É–Ω–Ω–∏—è –ø–∞–Ω–µ–ª
        function updateMoonPanel(date) {
            const moonData = getMoonPhase(date);
            
            document.getElementById('moonIcon').textContent = moonData.icon;
            document.getElementById('moonPhaseName').textContent = moonData.name;
            document.getElementById('moonIllumination').textContent = `–û—Å–≤–µ—Ç–µ–Ω–æ—Å—Ç: ${moonData.illumination}%`;
            
            const adviceList = document.getElementById('moonAdviceList');
            adviceList.innerHTML = '';
            
            moonData.advice.forEach(advice => {
                const li = document.createElement('li');
                li.className = advice.type;
                li.textContent = advice.text;
                adviceList.appendChild(li);
            });
        }

        // –í—Ä—ä—â–∞ –∏–∫–æ–Ω–∞—Ç–∞ –Ω–∞ –ª—É–Ω–∞—Ç–∞ –∑–∞ –¥–∞–¥–µ–Ω –¥–µ–Ω
        function getMoonIconForDay(date) {
            const moonData = getMoonPhase(date);
            return moonData.icon;
        }

        // –ó–∞—Ä–µ–¥–∏ –∑–∞–ø–∏—Å–∫–∏—Ç–µ –æ—Ç localStorage –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
        function loadNotes() {
            const saved = localStorage.getItem('gardenNotes');
            if (saved) {
                notes = JSON.parse(saved);
            }
        }

        // –ó–∞–ø–∞–∑–∏ –∑–∞–ø–∏—Å–∫–∏—Ç–µ –≤ localStorage
        function saveNotes() {
            localStorage.setItem('gardenNotes', JSON.stringify(notes));
        }

        // –ì–µ–Ω–µ—Ä–∏—Ä–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä –∑–∞ —Ç–µ–∫—É—â–∏—è –º–µ—Å–µ—Ü
        function generateCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';

            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            // –î–æ–±–∞–≤–∏ –∑–∞–≥–ª–∞–≤–∏—è –Ω–∞ –¥–Ω–∏—Ç–µ
            const dayNames = ['–ü–æ–Ω', '–í—Ç–æ', '–°—Ä—è', '–ß–µ—Ç', '–ü–µ—Ç', '–°—ä–±', '–ù–µ–¥'];
            dayNames.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-header';
                header.textContent = day;
                calendar.appendChild(header);
            });

            // –ü—ä—Ä–≤–∏ –¥–µ–Ω –Ω–∞ –º–µ—Å–µ—Ü–∞
            const firstDay = new Date(year, month, 1);
            let firstDayOfWeek = firstDay.getDay();
            // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–º–µ –æ—Ç –Ω–µ–¥–µ–ª—è=0 –∫—ä–º –ø–æ–Ω–µ–¥–µ–ª–Ω–∏–∫=0
            firstDayOfWeek = firstDayOfWeek === 0 ? 6 : firstDayOfWeek - 1;

            // –ü–æ—Å–ª–µ–¥–µ–Ω –¥–µ–Ω –Ω–∞ –º–µ—Å–µ—Ü–∞
            const lastDay = new Date(year, month + 1, 0).getDate();

            // –î–æ–±–∞–≤–∏ –ø—Ä–∞–∑–Ω–∏ –∫–ª–µ—Ç–∫–∏ –ø—Ä–µ–¥–∏ –ø—ä—Ä–≤–∏—è –¥–µ–Ω
            for (let i = 0; i < firstDayOfWeek; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendar.appendChild(emptyDay);
            }

            // –î–æ–±–∞–≤–∏ –¥–Ω–∏—Ç–µ –Ω–∞ –º–µ—Å–µ—Ü–∞
            for (let day = 1; day <= lastDay; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                
                const dateKey = `${year}-${month}-${day}`;
                const dayDate = new Date(year, month, day);
                
                // –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –∏–º–∞ –∑–∞–ø–∏—Å–∫–∞ –∑–∞ —Ç–æ–∑–∏ –¥–µ–Ω
                if (notes[dateKey]) {
                    dayDiv.classList.add('has-note');
                }

                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                dayDiv.appendChild(dayNumber);

                // –î–æ–±–∞–≤–∏ –ª—É–Ω–Ω–∞ –∏–∫–æ–Ω–∞
                const moonMini = document.createElement('div');
                moonMini.className = 'moon-mini';
                moonMini.textContent = getMoonIconForDay(dayDate);
                dayDiv.appendChild(moonMini);

                if (notes[dateKey]) {
                    const preview = document.createElement('div');
                    preview.className = 'day-preview';
                    preview.textContent = notes[dateKey].substring(0, 15) + '...';
                    dayDiv.appendChild(preview);
                }

                dayDiv.addEventListener('click', () => selectDate(year, month, day));
                calendar.appendChild(dayDiv);
            }
        }

        // –ò–∑–±–µ—Ä–∏ –¥–∞—Ç–∞
        function selectDate(year, month, day) {
            selectedDate = { year, month, day };
            const dateKey = `${year}-${month}-${day}`;
            const selectedDateObj = new Date(year, month, day);

            // –ü—Ä–µ–º–∞—Ö–Ω–∏ –ø—Ä–µ–¥–∏—à–Ω–æ—Ç–æ —Å–µ–ª–µ–∫—Ç–∏—Ä–∞–Ω–µ
            document.querySelectorAll('.calendar-day').forEach(d => {
                d.classList.remove('selected');
            });

            // –ú–∞—Ä–∫–∏—Ä–∞–π –∏–∑–±—Ä–∞–Ω–∏—è –¥–µ–Ω
            event.currentTarget.classList.add('selected');

            // –û–±–Ω–æ–≤–∏ –∑–∞–≥–ª–∞–≤–∏–µ—Ç–æ –∏ —Ç–µ–∫—Å—Ç–∞
            const monthNames = ['–Ø–Ω—É–∞—Ä–∏', '–§–µ–≤—Ä—É–∞—Ä–∏', '–ú–∞—Ä—Ç', '–ê–ø—Ä–∏–ª', '–ú–∞–π', '–Æ–Ω–∏', 
                              '–Æ–ª–∏', '–ê–≤–≥—É—Å—Ç', '–°–µ–ø—Ç–µ–º–≤—Ä–∏', '–û–∫—Ç–æ–º–≤—Ä–∏', '–ù–æ–µ–º–≤—Ä–∏', '–î–µ–∫–µ–º–≤—Ä–∏'];
            document.getElementById('noteTitle').textContent = 
                `${day} ${monthNames[month]} ${year}`;

            // –û–±–Ω–æ–≤–∏ –ª—É–Ω–Ω–∏—è –ø–∞–Ω–µ–ª –∑–∞ –∏–∑–±—Ä–∞–Ω–∏—è –¥–µ–Ω
            updateMoonPanel(selectedDateObj);

            // –ó–∞—Ä–µ–¥–∏ –∑–∞–ø–∏—Å–∫–∞—Ç–∞ –∞–∫–æ –∏–º–∞
            const noteText = document.getElementById('noteText');
            noteText.value = notes[dateKey] || '';
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            noteText.style.animation = 'none';
            setTimeout(() => {
                noteText.style.animation = 'fadeIn 0.5s ease-out';
            }, 10);
        }

        // –ó–∞–ø–∞–∑–∏ –∑–∞–ø–∏—Å–∫–∞
        function saveNote() {
            if (!selectedDate) {
                alert('–ú–æ–ª—è, –∏–∑–±–µ—Ä–∏ –¥–µ–Ω –æ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–∞!');
                return;
            }

            const dateKey = `${selectedDate.year}-${selectedDate.month}-${selectedDate.day}`;
            const noteText = document.getElementById('noteText').value;

            if (noteText.trim()) {
                notes[dateKey] = noteText;
            } else {
                delete notes[dateKey];
            }

            saveNotes();
            generateCalendar();

            // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –±—É—Ç–æ–Ω–∞
            const btn = document.getElementById('saveBtn');
            btn.classList.add('pulse');
            btn.textContent = '‚úÖ –ó–∞–ø–∞–∑–µ–Ω–æ!';
            
            setTimeout(() => {
                btn.classList.remove('pulse');
                btn.textContent = 'üíæ –ó–∞–ø–∞–∑–∏';
            }, 1500);

            // –ü—Ä–µ-—Å–µ–ª–µ–∫—Ç–∏—Ä–∞–π –¥–µ–Ω—è –∑–∞ –¥–∞ —Å–µ –æ–±–Ω–æ–≤–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞
            const { year, month, day } = selectedDate;
            setTimeout(() => {
                const days = document.querySelectorAll('.calendar-day:not(.empty)');
                days[day - 1 + (new Date(year, month, 1).getDay() === 0 ? 6 : new Date(year, month, 1).getDay() - 1)]?.click();
            }, 100);
        }

        // –°–º–µ–Ω–∏ –º–µ—Å–µ—Ü–∞
        document.getElementById('monthSelect').addEventListener('change', function() {
            currentDate.setMonth(parseInt(this.value));
            updateMonthImage(parseInt(this.value));
            generateCalendar();
            selectedDate = null;
            document.getElementById('noteTitle').textContent = '–ò–∑–±–µ—Ä–∏ –¥–µ–Ω –æ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–∞';
            document.getElementById('noteText').value = '';
            updateMoonPanel(currentDate);
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadNotes();
        document.getElementById('monthSelect').value = currentDate.getMonth();
        updateMonthImage(currentDate.getMonth());
        updateMoonPanel(currentDate);
        generateCalendar();
    </script>
</body>
</html>